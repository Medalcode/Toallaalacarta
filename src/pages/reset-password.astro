---
import Base from "@/layouts/Base.astro";
import ResetPasswordForm from "@/layouts/functional-components/ResetPasswordForm";

// Get token from URL
const url = new URL(Astro.request.url);
const token = url.searchParams.get('token');

// If no token, redirect to forgot password
if (!token) {
  return Astro.redirect('/forgot-password');
}
---

<Base title="Restablecer Contraseña - Toalla a la Carta">
  <section class="section py-20">
    <div class="container max-w-md">
      <div class="text-center mb-8">
        <h1 class="h2 mb-4">Restablecer Contraseña</h1>
        <p class="text-gray-600">
          Ingresa tu nueva contraseña a continuación.
        </p>
      </div>

      <div class="bg-white rounded-lg shadow-lg p-8">
        <ResetPasswordForm client:load token={token} />
      </div>

      <div class="text-center mt-6">
        <p class="text-sm text-gray-600">
          ¿Recordaste tu contraseña?{" "}
          <a href="/login" class="text-primary hover:underline font-medium">
            Iniciar Sesión
          </a>
        </p>
      </div>
    </div>
  </section>
</Base>
